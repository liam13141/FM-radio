<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>KidSafe Search</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
  font-family:"Poppins",system-ui,sans-serif;
  background:linear-gradient(120deg,#0e0f12 30%,#17191e 100%);
  color:#e9eef3;
  margin:0;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:40px 20px;
}
h1{color:#00c6ff;margin-bottom:20px}
.search-bar{display:flex;gap:10px;width:100%;max-width:600px;margin-bottom:20px}
input{
  flex:1;padding:14px;border:none;border-radius:12px;font-size:1rem;
  background:#17191e;color:#e9eef3;border:1px solid #232a33;
}
button{
  background:#00c6ff;border:none;color:#041017;font-weight:600;
  border-radius:12px;padding:14px 20px;cursor:pointer;
}
.results{max-width:700px;width:100%;display:flex;flex-direction:column;gap:14px}
.card{
  background:#17191e;border:1px solid #232a33;border-radius:12px;padding:14px;
}
a{color:#7be1ff;text-decoration:none}
.bad{color:#ff5577;font-weight:600}
footer{margin-top:auto;color:#9aa4ad;font-size:.9rem;margin-top:30px}
</style>
</head>
<body>
<h1>🔎 KidSafe Search</h1>
<div class="search-bar">
  <input id="query" type="text" placeholder="Search the web safely...">
  <button id="searchBtn">Search</button>
</div>
<div id="status"></div>
<div id="results" class="results"></div>
<footer>© 2025 KidSafe Search · No tracking · Safe filtering</footer>
<script>
const badWords = [
  "porn","sex","nude","violence","drugs","weapon","gun","blood","murder","kill",
  "hate","abuse","gore","casino","gambling","nsfw","torture","suicide","death",
  "assault","adult","explicit","dating","terror","alcohol"
];

const qEl=document.getElementById("query");
const btn=document.getElementById("searchBtn");
const out=document.getElementById("results");
const status=document.getElementById("status");

btn.addEventListener("click",doSearch);
qEl.addEventListener("keydown",e=>{if(e.key==="Enter")doSearch();});

async function doSearch(){
  const q=qEl.value.trim();
  out.innerHTML="";
  if(!q){status.textContent="Type something safe to search!";return;}
  if(isBad(q)){status.innerHTML=`🚫 This search may include unsafe terms. Please try something else.`;return;}
  status.textContent="Searching...";
  try{
    const res=await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(q)}&format=json&safe=1`);
    const data=await res.json();
    renderResults(data,q);
  }catch(e){
    status.textContent="Error fetching results.";
  }
}

function isBad(q){
  const text=q.toLowerCase();
  return badWords.some(b=>text.includes(b));
}

function renderResults(data,q){
  const results=[];
  if(data.RelatedTopics){
    data.RelatedTopics.forEach(t=>{
      if(t.FirstURL&&t.Text&&!isBad(t.Text)){
        results.push({title:t.Text,link:t.FirstURL});
      }
    });
  }
  out.innerHTML="";
  if(results.length===0){
    status.textContent="No safe results found.";
    return;
  }
  status.textContent=`Showing ${results.length} safe results for “${q}”`;
  results.slice(0,20).forEach(r=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`<a href="${r.link}" target="_blank">${r.title}</a>`;
    out.appendChild(card);
  });
}
</script>
</body>
</html>
